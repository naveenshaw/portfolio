{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/2017-02-27-react-to-everything/","result":{"data":{"markdownRemark":{"html":"<p>In this article I will introduce you to a project which I have developed over the last few months. It aims to share as much code possible between Android, iOS, Web and Desktop, but tries to look and act like a first class citizen.</p>\n<p>At first, I start with a short introduction where I come from and then I will present you the project in detail. Feel free to ask me anything in the comments :) and enjoy the read.</p>\n<h2>Everything start with a dream</h2>\n<p>It is the dream of every developer. Write your code once and run it on every device possible. This would result in less development time and costs, fewer bugs and a broader audience.</p>\n<p>In the last years a few projects tried to make this dream come true. <a href=\"https://www.sencha.com/products/touch/\">Sencha Touch</a>, <a href=\"https://www.appcelerator.com/mobile-app-development-products/\">Titanium</a> or <a href=\"http://phonegap.com/\">PhoneGap</a> just to name a few. But there was never a real competitor to native development, which was comparable performance-wise and could share much code between different platforms.</p>\n<p>The last universal app, which I have developed was actually my first one. I developed <a href=\"https://play.google.com/store/apps/details?id=air.com.mikescho.soccersketch\">SoccerSketch</a> in 2010 with Adobe Flash CS4. It was easy to develop and could be deployed on Windows, Linux, Mac, iOS, Android and BlackBerry, which was huge to me as a newcomer in the development world, who did not know much about developing. But there was a big issue or a big benefit, it depends on how you look at it, on each platform my app looked the same and the performance varied heavy on each platform. This could also be my bad coding back then, but who knows ;) — “burns old hard drive”.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2560/0*QuOmJznAJvBR0gQt.\" alt=\"Screenshot of SoccerSketch running on Android Honeycomb\"><em>Screenshot of SoccerSketch running on Android Honeycomb</em></p>\n<p>Now fast-forward 7 years and a few programming courses, books and projects later. I had picked up once again on this idea to write once and run everywhere. So I started a proof of concept project, which is not quite write once run everywhere, but it is close.</p>\n<h2>The future is now</h2>\n<p>My project <a href=\"https://raw.githubusercontent.com/mikebarkmin/react-to-everything/\">react-to-everything</a> started as an idea 10 months ago. Especially the <a href=\"https://github.com/benoitvallon/react-native-nw-react-calculator\">react-native-nw-react-calculator</a> from <a href=\"https://github.com/benoitvallon\">benoitvallon</a> inspired much of my work. The core concepts derived from his ideas. I will go over the core principles of the project, but feel free to give him a star.</p>\n<p>At first take a look at the screenshot down below. On the right-hand-side you can see a screenshot of the project running in the browser, which is also the same view you would get when running it on a desktop. On the left-hand-side you can see it running on an android device (<a href=\"https://material.io/guidelines/components/bottom-navigation.html#\">bottom tabs are a thing now in material design</a>). Unfortunately I can not present you an iOS screenshot, because I do not own an apple device, but believe me it would look like an iOS app.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*ABk0YoSlPemYYJme9alM3g.png\" alt=\"Left: Android, Right: Web\"><em>Left: Android, Right: Web</em></p>\n<h3>The key is to react</h3>\n<p>The ui components are developed with react and react-native. But I relay heavily on inheritance to share as much code as possible.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*zvD2ROc4HqkFvZHQvBvi9Q.png\" alt=\"Diagram of the connection between the files. The arrow defines the direction in which the code is pumped.\"><em>Diagram of the connection between the files. The arrow defines the direction in which the code is pumped.</em></p>\n<p>So every component which I have used in this project consists of five files. At first this sound like chaos, but let me explain. We have three base classes. One for Android (<em>.android.js), one for iOS (</em>.ios.js) and one for the Web/Desktop (<em>.js). These files contain platform specific code, but Android and iOS relay on the class NativeBase (</em>.native.js), which could be used to only write code for mobile, but not for the Web/Desktop.</p>\n<p>For the Header component which you can see in the screenshot following code is used for Android/iOS and for Web/Desktop:</p>\n<p>HeaderBase.native.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Header<span class=\"token punctuation\">,</span> Title<span class=\"token punctuation\">,</span> Body <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'native-base'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'../../locales/I18n'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NativeBase</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>Header<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>Body<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Title<span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reactToEverything'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Title<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Body<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Header<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>HeaderBase.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> AppBar <span class=\"token keyword\">from</span> <span class=\"token string\">'material-ui/AppBar'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'../../locales/I18n'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> toggleDrawer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../actions/navigationActions'</span><span class=\"token punctuation\">;</span>\n    \n    @<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Base</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleToggle <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleToggle</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">handleToggle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">toggleDrawer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>AppBar\n              onLeftIconButtonTouchTap<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleToggle<span class=\"token punctuation\">}</span>\n              title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'reactToEverything'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see the is a little more going on in the Web/Desktop specific code due to the navigation thought a drawer.</p>\n<h3>Redux to the rescue</h3>\n<p>To abstract the data flow of the app I have found that <a href=\"http://redux.js.org/\">redux</a> is a great tool for that. You have seen a small example of how redux is implemented in my app above. A much better example of the integration is the settings screen:</p>\n<p>SettingsBase.native.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Content<span class=\"token punctuation\">,</span> Text<span class=\"token punctuation\">,</span> ListItem<span class=\"token punctuation\">,</span> Left<span class=\"token punctuation\">,</span> Right<span class=\"token punctuation\">,</span> Switch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'native-base'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'../../locales/I18n'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NativeBase</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>Content<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>ListItem<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Left<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'settings.settings1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Left<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Right<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Switch\n                    onValueChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings1Change</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>settings1<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Right<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListItem<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>ListItem<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Left<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'settings.settings2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Left<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>Right<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Switch\n                    onValueChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings2Change</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>settings2<span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Right<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ListItem<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Content<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>SettingsBase.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> List<span class=\"token punctuation\">,</span> ListItem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'material-ui/List'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> Toggle <span class=\"token keyword\">from</span> <span class=\"token string\">'material-ui/Toggle'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'../../locales/I18n'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Base</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>List<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>ListItem\n                  primaryText<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'settings.settings1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                  rightToggle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">&lt;</span>Toggle\n                        onToggle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings1Change</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>settings1<span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>ListItem\n                  primaryText<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>I18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'settings.settings2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                  rightToggle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n                    <span class=\"token operator\">&lt;</span>Toggle\n                        onToggle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings2Change</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">.</span>settings2<span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>List<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, both classes using the methods onSettings1Change and onSettings2Change these are “abstract” methods with should be implemented in an inherent class. In our example:</p>\n<p>Settings.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> Base <span class=\"token keyword\">from</span> <span class=\"token string\">'./SettingsBase'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> setSettings1<span class=\"token punctuation\">,</span> setSettings2 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../actions/settingsActions'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Settings</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Base</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings1Change</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onSettings2Change</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">onSettings1Change</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">setSettings1</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">onSettings2Change</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">setSettings2</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">function</span> <span class=\"token function\">mapStateToProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        settings<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>settings<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Settings<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This class also connects to the redux state and therefore the props settings.settings1 and settings.settings2 will update when the redux state changes those.</p>\n<p>When you follow this sample you could extract all the logic into one class and let the platform specific class as dumb as possible. They should only receive data and display it. Nothing more, nothing less.</p>\n<h3>Localization</h3>\n<p>Thanks to the concept describe above it is also possible to share the same translations and use the same api for that throughout your whole codebase. I have use i<a href=\"https://github.com/fnando/i18n-js\">18n-js</a> and <a href=\"https://github.com/AlexanderZaytsev/react-native-i18n\">react-native-i18n</a>, which resulted in following code:</p>\n<p>I18n.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'i18n-js'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> de <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/de'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/en'</span><span class=\"token punctuation\">;</span>\n    \n    I18n<span class=\"token punctuation\">.</span>fallbacks <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    \n    I18n<span class=\"token punctuation\">.</span>translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      en<span class=\"token punctuation\">,</span>\n      de<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    I18n<span class=\"token punctuation\">.</span>locale <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>language <span class=\"token operator\">||</span> navigator<span class=\"token punctuation\">.</span>userLanguage<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> I18n<span class=\"token punctuation\">;</span></code></pre></div>\n<p>I18n.native.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native-i18n'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> de <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/de'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/en'</span><span class=\"token punctuation\">;</span>\n    \n    I18n<span class=\"token punctuation\">.</span>fallbacks <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    \n    I18n<span class=\"token punctuation\">.</span>translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      en<span class=\"token punctuation\">,</span>\n      de<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> I18n<span class=\"token punctuation\">;</span></code></pre></div>\n<p>I18n.android.js and I18n.ios.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token keyword\">import</span> I18n <span class=\"token keyword\">from</span> <span class=\"token string\">'./I18n.native'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> I18n<span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Conclusion</h2>\n<p>It was a fun project to tinker with react, react-native, redux and the whole idea of having to write once and run everywhere. Even though the whole process of creating five files for each component is very tedious (plop is configured for automated component generation in my repository), I think it is a nice setup, which could be used to develop app that should have the same screen and the same data-flow. When you want an extra screen for Android than the whole project structure becomes a mess. Therefore, I would recommend developing a separate ui for each platform, when you create such an app. But keep using react-native ;) it is really awesome.</p>\n<p>I hope you have enjoyed the read. What are your thoughts about write once and run everywhere? Do you have any recommendations how the project could be further improved? Let me know, every feedback is good feedback. :)</p>\n<p>Thank you!</p>","excerpt":"In this article I will introduce you to a project which I have developed over the last few months. It aims to share as much code possible…","frontmatter":{"title":"React to Everything"}}},"pageContext":{"slug":"/blog/2017-02-27-react-to-everything/"}}}